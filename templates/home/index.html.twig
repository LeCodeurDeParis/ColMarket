{% extends 'base.html.twig' %}

{% block title %}ColMarket{% endblock %}

{% block body %}
    {{ include('header.html.twig') }}
    <main class="flex flex-col items-center gap-16">
        {% if is_granted('ROLE_ADMIN') %}
            <div class="flex justify-center mt-16">
                <p class="self-center mr-48 text-2xl">Add a new product</p>
                {% form_theme form 'form/layout.html.twig' %}
                {{ form(form) }}
            </div>
        {% endif %}
        
        <p class="ml-8 text-2xl self-start">Products</p>

        <div class="flex justify-evenly w-full">
            {% for produit in products %}
                <div class="flex flex-col items-center justify-center gap-4 w-52 h-64 p-4 bg-gradient-to-b from-[#A85707] to-[#893526] rounded-lg text-white">
                    {% if produit.photo is empty %}
                    <p>No Image available<p>
                    {% else %}
                    <div class="w-24 h-24">
                        <img src="/img/{{ produit.photo }}" alt="product image" class="w-full h-full object-cover">
                    </div>
                    {% endif %}
                    <a href="{{path('app_product_show', {id: produit.id}) }}"><h2>{{produit.nom}}</h2></a>
                    <p>{{produit.description}}</p>
                    <p>{{produit.prix}}€</p>
                    <p>Quantité restante: {{produit.stock}}</p>
                </div>
            {% else %}
                <p>No products available</p>
            {% endfor %}
        </div>
    </main>
{% endblock %}
